{
  "licenseDirectoryPath" : "/gpfs/projects/bsc72/PELE++/license/",
  "Initialization" : {
     "allowMissingTerminals": true,
     "ForceField" : "OPLS2005",
     "MultipleComplex": [ $COMPLEXES ],
     "Solvent" : { 
        "ionicStrength" : 0.15, "solventType" : "VDGBNP", "useDebyeLength" : true }
   },
   "verboseMode": false,
   "commands" : [
      {
         "commandType" : "peleSimulation",
         "RandomGenerator" : { "seed" : $SEED },"selectionToPerturb" : { "chains" : { "names" : [ "L" ] } },
         "PELE_Output" : {
            "savingFrequencyForAcceptedSteps" : 1,
            "savingMode" : "savingTrajectory",
            "reportPath": "$OUTPUT_PATH/report",
            "trajectoryPath": "$OUTPUT_PATH/trajectory.xtc"
         },
         "PELE_Parameters" : {
            "anmFrequency" : 0,
            "sideChainPredictionFrequency" : 1,
            "minimizationFrequency" : 1,
            "waterPerturbationFrequency": 1,
            "perturbationCOMConstraintConstant" : 1.0,
            "sideChainPredictionRegionRadius" : 6,
            "activateProximityDetection": true,
            "temperature": 1500,
            "numberOfPeleSteps": $PELE_STEPS
         },"constraints":[
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:39:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:41:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:43:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:45:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:47:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:49:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:51:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:53:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:55:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:57:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:59:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:61:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:63:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:65:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:67:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:69:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:71:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:73:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:75:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:77:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:79:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:81:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:83:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:85:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:87:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:89:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:91:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:93:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:95:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:97:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:99:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:101:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:103:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:105:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:107:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:109:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:111:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:113:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:115:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:117:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:119:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:121:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:123:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:125:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:127:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:129:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:131:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:133:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:135:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:137:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:139:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:141:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:143:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:145:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:147:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:149:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:151:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:153:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:155:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:157:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:159:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:161:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:163:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:165:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:167:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:169:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:171:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:173:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:175:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:177:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:179:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:181:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:183:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:185:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:187:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:189:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:191:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:193:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:195:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:197:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:199:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:201:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:203:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:205:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:207:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:209:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:211:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:213:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:36:_CA_" },
			{ "type": "constrainAtomToPosition", "springConstant": 10, "equilibriumDistance": 0.0, "constrainThisAtom": "A:215:_CA_" }
],

          "Perturbation": {
                

                "Box": {
                    "type": "sphericalBox",
                    "radius": 10,
                    "fixedCenter": [-5.502, 2.426, -20.978]
                },

                "perturbationType":"naive",
                "translationDirection": "steered",
                "rotationAngles": "nonCoupled",
                "parameters": {
                    "numberOfStericTrials": 500,
                    "steeringUpdateFrequency": 0,
                    "overlapFactor": 0.65
                }          
            },

         "ANM" : {
            "algorithm": "CARTESIANS", "nodes": { "atoms": { "names": [ "_CA_" ]} },
            "ANMMinimizer" : {
               "algorithm" : "TruncatedNewton",
               "parameters" : {
                  "MaximumMinimizationIterations" : 1,
                  "MaximumNewtonIterations" : 25,
                  "MinimumRMS" : 0.2,
                  "alphaUpdated" : false,
                  "nonBondingListUpdatedEachMinStep" : false 
               }
            },
            "options" : {
               "directionGeneration" : "random",
               "modesMixingOption" : "mixMainModeWithOthersModes",
               "pickingCase" : "RANDOM_MODE"
            },
            "parameters" : {
               "displacementFactor" : 0.75,
               "eigenUpdateFrequency" : 1000000,
               "mainModeWeightForMixModes" : 0.75,
               "modesChangeFrequency" : 4,
               "numberOfModes": 6,
               "relaxationSpringConstant" : 0.5
            }
         },
         "SideChainPrediction" : {
            "algorithm" : "zhexin",
            "parameters" : { "discardHighEnergySolutions" : false, "resolution": 10, "randomize" : false, "numberOfIterations": 1 }
         },
         "Minimizer" : {
            "algorithm" : "TruncatedNewton",
            "parameters" : { "MinimumRMS" : 0.2, "alphaUpdated" : false, "nonBondingListUpdatedEachMinStep" : true }
         },
         "PeleTasks" : [
            {
               "metrics" : [

                        { "type": "bindingEnergy",
                           "boundPartSelection": { "chains": { "names": ["L"] } }
                        },


                        { "type": "sasa",
                           "tag": "sasaLig",
                           "selection": { "chains": { "names": ["L"] } }
                        },


                     {
                     "type":"com_distance",
                     "tag":"distance_A111OG_L1C25",
                     "selection_group_1":{
                     "atoms": { "ids":["A:111:_OG_"]}
                     },
                     "selection_group_2":{
                     "atoms": { "ids":["L:1:_C25"]}
                     }
                     },
                     

                     {
                     "type":"com_distance",
                     "tag":"distance_A111OG_L1C33",
                     "selection_group_1":{
                     "atoms": { "ids":["A:111:_OG_"]}
                     },
                     "selection_group_2":{
                     "atoms": { "ids":["L:1:_C33"]}
                     }
                     },
                     

                     {
                     "type":"com_distance",
                     "tag":"distance_A111OG_L1C47",
                     "selection_group_1":{
                     "atoms": { "ids":["A:111:_OG_"]}
                     },
                     "selection_group_2":{
                     "atoms": { "ids":["L:1:_C47"]}
                     }
                     },
                     

                     {
                     "type":"com_distance",
                     "tag":"distance_A111OG_L1C55",
                     "selection_group_1":{
                     "atoms": { "ids":["A:111:_OG_"]}
                     },
                     "selection_group_2":{
                     "atoms": { "ids":["L:1:_C55"]}
                     }
                     },
                     

                     {
                     "type":"com_distance",
                     "tag":"distance_A111OG_L1C69",
                     "selection_group_1":{
                     "atoms": { "ids":["A:111:_OG_"]}
                     },
                     "selection_group_2":{
                     "atoms": { "ids":["L:1:_C69"]}
                     }
                     },
                     

                     {
                     "type":"com_distance",
                     "tag":"distance_A111OG_L1C77",
                     "selection_group_1":{
                     "atoms": { "ids":["A:111:_OG_"]}
                     },
                     "selection_group_2":{
                     "atoms": { "ids":["L:1:_C77"]}
                     }
                     },
                     

                     {
                     "type":"com_distance",
                     "tag":"distance_A111OG_L1C91",
                     "selection_group_1":{
                     "atoms": { "ids":["A:111:_OG_"]}
                     },
                     "selection_group_2":{
                     "atoms": { "ids":["L:1:_C91"]}
                     }
                     },
                     

                     {
                     "type":"com_distance",
                     "tag":"distance_A111OG_L1C99",
                     "selection_group_1":{
                     "atoms": { "ids":["A:111:_OG_"]}
                     },
                     "selection_group_2":{
                     "atoms": { "ids":["L:1:_C99"]}
                     }
                     },
                     

                     {
                     "type":"com_distance",
                     "tag":"distance_A111OG_A190ND1",
                     "selection_group_1":{
                     "atoms": { "ids":["A:111:_OG_"]}
                     },
                     "selection_group_2":{
                     "atoms": { "ids":["A:190:_ND1"]}
                     }
                     },
                     

                     {
                     "type":"com_distance",
                     "tag":"distance_A111OG_A190NE2",
                     "selection_group_1":{
                     "atoms": { "ids":["A:111:_OG_"]}
                     },
                     "selection_group_2":{
                     "atoms": { "ids":["A:190:_NE2"]}
                     }
                     },
                     

                     {
                     "type":"com_distance",
                     "tag":"distance_A190ND1_A167OD1",
                     "selection_group_1":{
                     "atoms": { "ids":["A:190:_ND1"]}
                     },
                     "selection_group_2":{
                     "atoms": { "ids":["A:167:_OD1"]}
                     }
                     },
                     

                     {
                     "type":"com_distance",
                     "tag":"distance_A190ND1_A167OD2",
                     "selection_group_1":{
                     "atoms": { "ids":["A:190:_ND1"]}
                     },
                     "selection_group_2":{
                     "atoms": { "ids":["A:167:_OD2"]}
                     }
                     },
                     

                     {
                     "type":"com_distance",
                     "tag":"distance_A190NE2_A167OD1",
                     "selection_group_1":{
                     "atoms": { "ids":["A:190:_NE2"]}
                     },
                     "selection_group_2":{
                     "atoms": { "ids":["A:167:_OD1"]}
                     }
                     },
                     

                     {
                     "type":"com_distance",
                     "tag":"distance_A190NE2_A167OD2",
                     "selection_group_1":{
                     "atoms": { "ids":["A:190:_NE2"]}
                     },
                     "selection_group_2":{
                     "atoms": { "ids":["A:167:_OD2"]}
                     }
                     },
                     
                        { "tag" : "rand", "type" : "random" },
                        { "tag" : "rand4", "type" : "random" },
                        { "tag" : "rand3", "type" : "random" },
                        { "tag" : "rand2", "type" : "random" },
                        { "tag" : "rand1", "type" : "random" }
                     ]

             ,
            "parametersChanges" : [
                 { "ifAnyIsTrue": [ "rand >= .5" ],
                     "doThesechanges": { "Perturbation::parameters": { "rotationScalingFactor": 0.05 } },
                     "otherwise": { "Perturbation::parameters": { "rotationScalingFactor": 0.2 } }
                 },
                 { "ifAnyIsTrue": [ "rand1 >= 0.5" ],
                     "doThesechanges": { "Perturbation::parameters": { "translationRange": 0.5} },
                     "otherwise": { "Perturbation::parameters": { "translationRange": 1.0} }
                 },
                 {  "ifAnyIsTrue": [ "rand2 >= 0.5" ],
                        "doThesechanges": {  "Perturbation::parameters": { "steeringUpdateFrequency": 0, "numberOfTrials": 30 } },
                        "otherwise": {  "Perturbation::parameters": { "steeringUpdateFrequency": 1 , "numberOfTrials": 10  }}
                }
]

}]}]}
